<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="description" content="숫자에 담긴 사랑과 추억을 발견하세요. 우리 가족의 특별한 숫자 이야기가 시작됩니다.">
    <title>우리 가족의 숫자 동화 - 사랑을 세면 보이는 이야기</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --background: #faf9f7;
            --foreground: #3d362a;
            --border: #e6dfd5;
            --card: #ffffff;
            --card-border: #ede9e3;
            --primary: #c67f3e;
            --primary-foreground: #ffffff;
            --muted-foreground: #877760;
            --input-border: #bfbfbf;
        }

        .dark {
            --background: #1a1510;
            --foreground: #f2ede7;
            --border: #332e26;
            --card: #211d17;
            --card-border: #2e2820;
            --primary: #c67f3e;
            --primary-foreground: #ffffff;
            --muted-foreground: #9e9488;
            --input-border: #4d4d4d;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--background);
            color: var(--foreground);
            min-height: 100vh;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 768px;
            margin: 0 auto;
            padding: 0 24px;
        }

        header {
            border-bottom: 1px solid var(--border);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 0;
        }

        h1 {
            font-size: 20px;
            font-weight: 700;
        }

        @media (min-width: 768px) {
            h1 {
                font-size: 24px;
            }
        }

        .theme-toggle {
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 8px;
            color: var(--foreground);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            transition: background-color 0.2s;
        }

        .theme-toggle:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .dark .theme-toggle:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .theme-toggle svg {
            width: 20px;
            height: 20px;
        }

        main {
            padding: 48px 0;
        }

        @media (min-width: 768px) {
            main {
                padding: 80px 0;
            }
        }

        .input-section {
            display: flex;
            flex-direction: column;
            gap: 48px;
        }

        .title-section {
            text-align: center;
        }

        .main-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        @media (min-width: 768px) {
            .main-title {
                font-size: 48px;
            }
        }

        .subtitle {
            font-size: 20px;
            color: var(--muted-foreground);
        }

        @media (min-width: 768px) {
            .subtitle {
                font-size: 24px;
            }
        }

        .inputs-container {
            display: flex;
            flex-direction: column;
            gap: 32px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .input-label {
            font-size: 24px;
            font-weight: 500;
            text-align: center;
        }

        @media (min-width: 768px) {
            .input-label {
                font-size: 32px;
            }
        }

        .number-input {
            height: 80px;
            font-size: 40px;
            text-align: center;
            font-weight: 700;
            border: 2px solid var(--input-border);
            border-radius: 8px;
            background-color: var(--background);
            color: var(--foreground);
            font-family: 'Noto Sans KR', sans-serif;
        }

        @media (min-width: 768px) {
            .number-input {
                height: 96px;
                font-size: 48px;
            }
        }

        .number-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(198, 127, 62, 0.2);
        }

        .submit-button {
            width: 100%;
            height: 64px;
            font-size: 24px;
            font-weight: 700;
            background-color: var(--primary);
            color: var(--primary-foreground);
            border: none;
            border-radius: 9999px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-family: 'Noto Sans KR', sans-serif;
            transition: opacity 0.2s;
        }

        @media (min-width: 768px) {
            .submit-button {
                height: 80px;
                font-size: 32px;
            }
        }

        .submit-button:hover:not(:disabled) {
            opacity: 0.9;
        }

        .submit-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quote-card {
            background-color: var(--card);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 48px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        @media (min-width: 768px) {
            .quote-card {
                padding: 64px;
            }
        }

        .quote-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 32px;
        }

        .quote-icon {
            width: 48px;
            height: 48px;
            color: var(--primary);
        }

        @media (min-width: 768px) {
            .quote-icon {
                width: 64px;
                height: 64px;
            }
        }

        .quote-text {
            font-size: 24px;
            line-height: 1.8;
            text-align: center;
            font-weight: 500;
            word-break: keep-all;
        }

        @media (min-width: 768px) {
            .quote-text {
                font-size: 36px;
            }
        }

        .quote-numbers {
            display: flex;
            gap: 8px;
            color: var(--muted-foreground);
            font-size: 20px;
            font-weight: 700;
        }

        @media (min-width: 768px) {
            .quote-numbers {
                font-size: 24px;
            }
        }

        .reset-button {
            width: 100%;
            height: 64px;
            font-size: 20px;
            font-weight: 500;
            background-color: transparent;
            color: var(--foreground);
            border: 2px solid var(--border);
            border-radius: 9999px;
            cursor: pointer;
            font-family: 'Noto Sans KR', sans-serif;
            transition: background-color 0.2s;
        }

        @media (min-width: 768px) {
            .reset-button {
                height: 80px;
                font-size: 24px;
            }
        }

        .reset-button:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .dark .reset-button:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .result-section {
            display: flex;
            flex-direction: column;
            gap: 32px;
        }

        footer {
            border-top: 1px solid var(--border);
            margin-top: 80px;
        }

        .footer-content {
            text-align: center;
            padding: 32px 0;
            color: var(--muted-foreground);
            font-size: 18px;
        }

        @media (min-width: 768px) {
            .footer-content {
                font-size: 20px;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <h1>✨ 우리 가족의 숫자 동화</h1>
                <button class="theme-toggle" id="themeToggle" aria-label="테마 변경">
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <circle cx="12" cy="12" r="4" stroke-width="2"/>
                        <path stroke-width="2" d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M4.93 19.07l1.41-1.41m11.32-11.32l1.41-1.41"/>
                    </svg>
                    <svg class="moon-icon hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-width="2" d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <div id="inputSection" class="input-section">
                <div class="title-section">
                    <h2 class="main-title">사랑을 세면 보이는 이야기</h2>
                    <p class="subtitle">당신만의 숫자를 하나 골라주세요.<br>그 숫자가 새로운 사랑의 의미가 됩니다.</p>
                </div>

                <div class="inputs-container">
                    <div class="input-group">
                        <label for="number1" class="input-label">첫 번째 숫자</label>
                        <input type="number" id="number1" class="number-input" min="0" max="100" placeholder="0-100" data-testid="input-number-1">
                    </div>

                    <div class="input-group">
                        <label for="number2" class="input-label">두 번째 숫자</label>
                        <input type="number" id="number2" class="number-input" min="0" max="100" placeholder="0-100" data-testid="input-number-2">
                    </div>

                    <div class="input-group">
                        <label for="number3" class="input-label">세 번째 숫자</label>
                        <input type="number" id="number3" class="number-input" min="0" max="100" placeholder="0-100" data-testid="input-number-3">
                    </div>
                </div>

                <button id="submitButton" class="submit-button" disabled data-testid="button-submit">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/>
                    </svg>
                    나의 이야기 열기
                </button>
            </div>

            <div id="resultSection" class="result-section hidden">
                <div class="quote-card">
                    <div class="quote-content">
                        <svg class="quote-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-width="2" d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/>
                            <path stroke-width="2" d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"/>
                        </svg>
                        <p class="quote-text" id="quoteText" data-testid="text-quote-message"></p>
                        <div class="quote-numbers">
                            <span id="displayNum1" data-testid="text-number-1"></span>
                            <span id="displayNum2" data-testid="text-number-2"></span>
                            <span id="displayNum3" data-testid="text-number-3"></span>
                        </div>
                    </div>
                </div>

                <button id="resetButton" class="reset-button" data-testid="button-reset">
                    다른 이야기 만들기
                </button>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <p>✨ 사랑을 담은 숫자들</p>
            </div>
        </div>
    </footer>

    <script>
        const quoteTemplates = [
            (n1, n2, n3) => `${n1}번의 웃음, ${n2}번의 도전, ${n3}가지 축복이 당신의 인생을 빛냅니다.`,
            (n1, n2, n3) => `당신의 인생에는 ${n1}개의 소중한 추억, ${n2}명의 사랑하는 사람들, ${n3}가지 감사할 일이 있습니다.`,
            (n1, n2, n3) => `${n1}년의 경험과 ${n2}번의 성장, ${n3}가지 지혜가 당신을 특별하게 만듭니다.`,
            (n1, n2, n3) => `당신은 이미 ${n1}개의 기쁨을 경험했고, ${n2}번 일어섰으며, ${n3}가지 꿈을 이루셨습니다.`,
            (n1, n2, n3) => `${n1}번의 미소, ${n2}개의 선물, ${n3}가지 행복한 순간들이 당신의 삶을 풍요롭게 합니다.`,
            (n1, n2, n3) => `당신의 마음속에는 ${n1}가지 사랑, ${n2}개의 희망, ${n3}번의 용기가 살아 숨 쉽니다.`,
            (n1, n2, n3) => `${n1}개의 별처럼 빛나는 순간, ${n2}번의 따뜻한 포옹, ${n3}가지 아름다운 기억이 당신과 함께합니다.`,
            (n1, n2, n3) => `당신은 ${n1}번 웃었고, ${n2}번 사랑했으며, ${n3}번 감사했습니다. 그것이 바로 당신의 보물입니다.`,
            (n1, n2, n3) => `${n1}가지 재능, ${n2}명의 소중한 인연, ${n3}개의 아름다운 가능성이 당신 안에 있습니다.`,
            (n1, n2, n3) => `당신의 인생은 ${n1}번의 일출, ${n2}개의 무지개, ${n3}가지 계절의 향기로 가득합니다.`,
            (n1, n2, n3) => `${n1}년간 쌓아온 지혜, ${n2}번의 친절, ${n3}가지 선행이 세상을 밝힙니다.`,
            (n1, n2, n3) => `당신에게는 ${n1}개의 소원, ${n2}번의 기회, ${n3}가지 가능성이 아직 남아있습니다.`,
            (n1, n2, n3) => `${n1}번 넘어졌지만 ${n2}번 일어섰고, ${n3}가지 교훈을 얻었습니다. 당신은 강합니다.`,
            (n1, n2, n3) => `당신의 삶에는 ${n1}가지 축복, ${n2}개의 선물, ${n3}번의 기적이 함께했습니다.`,
            (n1, n2, n3) => `${n1}개의 꿈을 품고, ${n2}번 도전하며, ${n3}가지 목표를 향해 나아가세요.`,
            (n1, n2, n3) => `당신은 ${n1}번 사랑을 나누고, ${n2}개의 마음을 치유했으며, ${n3}가지 희망을 전했습니다.`,
            (n1, n2, n3) => `${n1}가지 긍정적인 생각, ${n2}번의 용기 있는 선택, ${n3}개의 따뜻한 행동이 당신을 만듭니다.`,
            (n1, n2, n3) => `당신의 여정에는 ${n1}번의 성공, ${n2}가지 배움, ${n3}개의 성장이 새겨져 있습니다.`,
            (n1, n2, n3) => `${n1}명과 함께 웃고, ${n2}번 위로받았으며, ${n3}가지 사랑을 경험했습니다.`,
            (n1, n2, n3) => `당신에게는 ${n1}개의 재능, ${n2}가지 장점, ${n3}번의 빛나는 순간이 있습니다.`,
            (n1, n2, n3) => `${n1}년의 인내, ${n2}번의 노력, ${n3}가지 열정이 오늘의 당신을 만들었습니다.`,
            (n1, n2, n3) => `당신의 마음에는 ${n1}가지 감사, ${n2}개의 평화, ${n3}번의 기쁨이 자리 잡고 있습니다.`,
            (n1, n2, n3) => `${n1}번의 도움, ${n2}가지 친절, ${n3}개의 미소가 세상을 더 따뜻하게 만듭니다.`,
            (n1, n2, n3) => `당신은 ${n1}개의 산을 넘었고, ${n2}번의 강을 건넜으며, ${n3}가지 길을 개척했습니다.`,
            (n1, n2, n3) => `${n1}가지 추억, ${n2}명의 친구, ${n3}번의 행복한 날들이 당신의 보물 상자입니다.`,
            (n1, n2, n3) => `당신의 인생에는 ${n1}번의 새벽, ${n2}개의 별빛, ${n3}가지 희망이 빛나고 있습니다.`,
            (n1, n2, n3) => `${n1}개의 씨앗을 심고, ${n2}번 물을 주었으며, ${n3}가지 열매를 맺었습니다.`,
            (n1, n2, n3) => `당신은 ${n1}번 용서하고, ${n2}가지 사랑을 베풀었으며, ${n3}개의 마음을 어루만졌습니다.`,
            (n1, n2, n3) => `${n1}가지 취미, ${n2}개의 관심사, ${n3}번의 새로운 시도가 삶을 풍성하게 합니다.`,
            (n1, n2, n3) => `당신의 하루에는 ${n1}번의 미소, ${n2}가지 긍정, ${n3}개의 감사가 있습니다.`,
            (n1, n2, n3) => `${n1}년간 걸어온 길, ${n2}번의 선택, ${n3}가지 경험이 당신의 역사입니다.`,
            (n1, n2, n3) => `당신에게는 ${n1}개의 건강한 습관, ${n2}번의 좋은 선택, ${n3}가지 지혜가 있습니다.`,
            (n1, n2, n3) => `${n1}번의 용기, ${n2}가지 인내, ${n3}개의 믿음이 당신을 이끌어 왔습니다.`,
            (n1, n2, n3) => `당신은 ${n1}개의 문을 열고, ${n2}번의 계단을 올랐으며, ${n3}가지 정상에 섰습니다.`,
            (n1, n2, n3) => `${n1}가지 재능을 발견하고, ${n2}번 연습했으며, ${n3}개의 성과를 이루었습니다.`,
            (n1, n2, n3) => `당신의 삶에는 ${n1}명의 멘토, ${n2}가지 교훈, ${n3}번의 영감이 있었습니다.`,
            (n1, n2, n3) => `${n1}개의 목표를 세우고, ${n2}번 실행했으며, ${n3}가지 결실을 거두었습니다.`,
            (n1, n2, n3) => `당신은 ${n1}번 일어나고, ${n2}가지 도전을 받아들였으며, ${n3}개의 승리를 쟁취했습니다.`,
            (n1, n2, n3) => `${n1}가지 장점, ${n2}개의 강점, ${n3}번의 빛나는 순간이 당신을 빛나게 합니다.`,
            (n1, n2, n3) => `당신의 마음속에는 ${n1}번의 평온, ${n2}가지 기쁨, ${n3}개의 만족이 깃들어 있습니다.`,
            (n1, n2, n3) => `${n1}명에게 영감을 주고, ${n2}번 격려했으며, ${n3}가지 희망을 나누었습니다.`,
            (n1, n2, n3) => `당신은 ${n1}개의 약속을 지켰고, ${n2}번 신뢰를 쌓았으며, ${n3}가지 관계를 소중히 했습니다.`,
            (n1, n2, n3) => `${n1}가지 열정, ${n2}번의 헌신, ${n3}개의 성취가 당신의 이야기를 만듭니다.`,
            (n1, n2, n3) => `당신의 인생에는 ${n1}번의 봄, ${n2}가지 여름, ${n3}개의 가을이 있었습니다.`,
            (n1, n2, n3) => `${n1}개의 선물을 주고, ${n2}번 나누었으며, ${n3}가지 사랑을 전했습니다.`,
            (n1, n2, n3) => `당신은 ${n1}번 배우고, ${n2}가지 성장했으며, ${n3}개의 지혜를 얻었습니다.`,
            (n1, n2, n3) => `${n1}가지 감동, ${n2}번의 놀라움, ${n3}개의 기쁨이 당신의 여정을 채웁니다.`,
            (n1, n2, n3) => `당신에게는 ${n1}명의 가족, ${n2}가지 전통, ${n3}번의 소중한 순간이 있습니다.`,
            (n1, n2, n3) => `${n1}개의 희망을 품고, ${n2}번 기도했으며, ${n3}가지 응답을 받았습니다.`,
            (n1, n2, n3) => `당신은 ${n1}번의 변화를 겪었고, ${n2}가지 적응했으며, ${n3}개의 새로운 길을 찾았습니다.`
        ];

        function getQuoteFromNumbers(num1, num2, num3) {
            const sum = num1 + num2 + num3;
            const product = (num1 + 1) * (num2 + 1) * (num3 + 1);
            const index = (sum + product) % quoteTemplates.length;
            return quoteTemplates[index](num1, num2, num3);
        }

        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        const sunIcon = document.querySelector('.sun-icon');
        const moonIcon = document.querySelector('.moon-icon');
        
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark');
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            }
        }

        themeToggle.addEventListener('click', () => {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            
            if (isDark) {
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            } else {
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            }
        });

        // Input validation and submit
        const number1 = document.getElementById('number1');
        const number2 = document.getElementById('number2');
        const number3 = document.getElementById('number3');
        const submitButton = document.getElementById('submitButton');
        const inputSection = document.getElementById('inputSection');
        const resultSection = document.getElementById('resultSection');
        const quoteText = document.getElementById('quoteText');
        const displayNum1 = document.getElementById('displayNum1');
        const displayNum2 = document.getElementById('displayNum2');
        const displayNum3 = document.getElementById('displayNum3');
        const resetButton = document.getElementById('resetButton');

        function validateInputs() {
            const val1 = number1.value;
            const val2 = number2.value;
            const val3 = number3.value;
            
            const isValid = val1 !== '' && val2 !== '' && val3 !== '' &&
                          Number(val1) >= 0 && Number(val1) <= 100 &&
                          Number(val2) >= 0 && Number(val2) <= 100 &&
                          Number(val3) >= 0 && Number(val3) <= 100;
            
            submitButton.disabled = !isValid;
        }

        function limitInput(input) {
            input.addEventListener('input', (e) => {
                let value = e.target.value;
                if (value !== '') {
                    const num = Number(value);
                    if (num < 0) e.target.value = 0;
                    if (num > 100) e.target.value = 100;
                }
                validateInputs();
            });
        }

        limitInput(number1);
        limitInput(number2);
        limitInput(number3);

        submitButton.addEventListener('click', () => {
            const num1 = Number(number1.value);
            const num2 = Number(number2.value);
            const num3 = Number(number3.value);
            
            const quote = getQuoteFromNumbers(num1, num2, num3);
            
            quoteText.textContent = quote;
            displayNum1.textContent = num1;
            displayNum2.textContent = num2;
            displayNum3.textContent = num3;
            
            inputSection.classList.add('hidden');
            resultSection.classList.remove('hidden');
        });

        resetButton.addEventListener('click', () => {
            number1.value = '';
            number2.value = '';
            number3.value = '';
            validateInputs();
            
            resultSection.classList.add('hidden');
            inputSection.classList.remove('hidden');
        });

        // Initialize
        initTheme();
        validateInputs();
    </script>
</body>
</html>
